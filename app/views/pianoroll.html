<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="">
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/d3.v3.min.js"></script>
    <script type="text/javascript" src="js/bufferLoader.js"></script>
    <script type="text/javascript" src="js/audio.js"></script>
    <script type="text/javascript" src="js/whitenoise.js"></script>
    <script type="text/javascript" src="js/clip.js"></script>
    <script type="text/javascript" src="js/pianoRoll.js"></script>
    <title>Web Audio</title>

    <style type="text/css" media="all">
      #piano-roll {
        width: 700;
        height: 200;
        margin-right: auto;
        margin-left: auto;
        padding: 0;
      }
    </style>
    
  </head>
  <body>
      <button id="play-drums" >PLAY</button>
      <button id="stop" >STOP</button>
      <div id="piano-roll"></div>
    
  </body>

  <script>
    init();

    var clip = Clip({
        "kitIndex":13,
        "effectIndex":18,
        "tempo":120,
        "swingFactor":0,
        "effectMix":0.19718309859154926,
        "kickPitchVal":0.5,
        "snarePitchVal":0.5,
        "hihatPitchVal":0.5,
        "tom1PitchVal":0.5,
        "tom2PitchVal":0.5,
        "tom3PitchVal":0.5,
        "rhythm":[
            [2,0,0,2,0,0,0,2,0,0,0,0,0,0,2,0],
            [0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0],
            [0,1,0,1,0,1,1,0,0,1,0,1,0,0,1,1],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0],
            [0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,2,0,2,2,0,0,0,0,0],
            [0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,2,0,2,2,0,0,0,0,0]
        ]
    });

    var pianoRoll = new PianoRoll('#piano-roll', clip)
    pianoRoll.init();

    var drumMachine = new RhythmSample();
    drumMachine.loadBeat(clip);
    //TODO fix this
    $('#play-drums').click(
        function() {
            drumMachine.play();
        }
    );
    $('#stop').click(function() { 
        //clearInterval(timeoutId); 
        drumMachine.stop();
    });
    



</script>
</html>
